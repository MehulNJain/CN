//Client_Side
#include<stdio.h>
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>

int main(void)
{
    int sockfd, length, choice;
    struct sockaddr_in client;
    socklen_t clientAddrLen;
    int matA[2][2], matB[2][2], result[2][2];
    sockfd = socket(AF_INET, SOCK_DGRAM, 0);
    client.sin_family = AF_INET;
    client.sin_port = 6210;
    client.sin_addr.s_addr = inet_addr("127.0.0.1");
    clientAddrLen = sizeof(client);

    do {
        printf("\n-------------------- 2x2 Matrix Operations --------------------\n");
        printf("\n1. Addition");
        printf("\n2. Subtraction");
        printf("\n3. Multiplication");
        printf("\n4. Element-wise Division");
        printf("\n5. Exit");
        printf("\nEnter your Choice: ");
        scanf("%d", &choice);
        if (choice == 5)
            return 0;

        printf("\nEnter the first 2x2 matrix:\n");
        for (int i = 0; i < 2; i++)
            for (int j = 0; j < 2; j++)
                scanf("%d", &matA[i][j]);

        printf("\nEnter the second 2x2 matrix:\n");
        for (int i = 0; i < 2; i++)
            for (int j = 0; j < 2; j++)
                scanf("%d", &matB[i][j]);

        sendto(sockfd, matA, sizeof(matA), 0, (struct sockaddr*)&client, sizeof(client));
        sendto(sockfd, matB, sizeof(matB), 0, (struct sockaddr*)&client, sizeof(client));
        sendto(sockfd, &choice, sizeof(choice), 0, (struct sockaddr*)&client, sizeof(client));
        recvfrom(sockfd, result, sizeof(result), 0, (struct sockaddr*)&client, &clientAddrLen);

        printf("\nResultant Matrix:\n");
        for (int i = 0; i < 2; i++) {
            for (int j = 0; j < 2; j++) {
                printf("%d\t", result[i][j]);
            }
            printf("\n");
        }
    } while (1);

    close(sockfd);
}
